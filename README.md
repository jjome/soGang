# soGang - 멀티플레이어 게임 플랫폼

Node.js와 Express 기반의 멀티플레이어 게임 웹 애플리케이션입니다. 사용자들은 로그인 후 실시간으로 1~100 사이의 숫자 맞추기 게임을 즐길 수 있습니다.

## 주요 기능

- **사용자 관리**: 회원가입, 로그인, 로그아웃
- **세션 관리**: 안정적인 세션 저장 및 관리
- **실시간 게임**: Socket.IO를 이용한 멀티플레이어 게임
- **관리자 기능**: 사용자 목록 조회, 암구호 변경
- **점수 시스템**: 게임 결과에 따른 점수 기록

## 기술 스택

- **백엔드**: Node.js, Express, Socket.IO
- **데이터베이스**: SQLite
- **세션 저장소**: session-file-store
- **인증**: bcryptjs (비밀번호 해싱)
- **프론트엔드**: HTML, CSS, JavaScript

## 설치 및 실행

### 로컬 개발 환경

1. 의존성 설치:
```bash
npm install
```

2. 개발 서버 실행:
```bash
npm run dev
```

3. 프로덕션 서버 실행:
```bash
npm start
```

### Render 배포

1. Render에서 새 Web Service 생성
2. GitHub 저장소 연결
3. 환경 변수 설정:
   - `NODE_ENV`: `production`
   - `ADMIN_PASSWORD`: 관리자 비밀번호 (기본값: `admin`)

## 프로젝트 구조

```
soGang/
├── index.js              # 메인 서버 파일
├── database.js           # 데이터베이스 설정 및 함수
├── socketHandlers.js     # Socket.IO 이벤트 핸들러
├── package.json          # 프로젝트 의존성
├── public/               # 정적 파일
│   ├── login.html        # 로그인/회원가입 페이지
│   ├── game.html         # 게임 메인 페이지
│   ├── admin.html        # 관리자 페이지
│   └── game-client.js    # 게임 클라이언트 스크립트
├── data/                 # 데이터베이스 파일 (자동 생성)
├── sessions/             # 세션 파일 (자동 생성)
└── .gitignore           # Git 무시 파일
```

## 게임 규칙

1. **게임 시작**: 방장이 게임을 시작하면 모든 플레이어가 준비 상태가 됩니다.
2. **숫자 맞추기**: 1~100 사이의 랜덤 숫자를 맞춥니다.
3. **힌트 시스템**: 입력한 숫자가 정답보다 크거나 작은지 힌트를 제공합니다.
4. **점수 계산**: 빠르게 맞출수록 높은 점수를 획득합니다.
5. **게임 종료**: 모든 플레이어가 정답을 맞추면 게임이 종료됩니다.

## 관리자 기능

- **로그인**: `/admin` 페이지에서 관리자 비밀번호로 로그인
- **사용자 관리**: 등록된 사용자 목록 조회
- **암구호 변경**: 새로운 사용자 가입에 필요한 암구호 변경

## 해결된 문제들

### Render 배포 시 발생했던 문제들

1. **세션 저장 문제**: session-file-store로 변경하여 안정적인 세션 관리
2. **데이터베이스 접근 오류**: 파일 기반 SQLite로 변경하여 데이터 지속성 확보
3. **로그인 실패**: 세션 저장 시점을 명시적으로 처리하여 로그인 안정성 향상
4. **폼 데이터 처리**: JSON 요청으로 통일하여 클라이언트-서버 통신 개선

## 기본 설정

- **기본 암구호**: `002`
- **관리자 비밀번호**: `admin` (환경 변수로 변경 가능)
- **서버 포트**: `3000` (환경 변수 PORT로 변경 가능)

## 라이센스

이 프로젝트는 교육 목적으로 제작되었습니다. 