<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì„ í”Œë ˆì´ - ì†Œê°•</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .game-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        .pot-info {
            text-align: center;
        }
        .pot-amount {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
        }
        .community-cards {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            min-height: 120px;
        }
        .card {
            width: 80px;
            height: 120px;
            background: white;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            border: 2px solid #ddd;
            position: relative;
        }
        .card.hidden {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: transparent;
        }
        .card.red {
            color: #e74c3c;
        }
        .card.black {
            color: #2c3e50;
        }
        .players-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .player {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }
        .player.current {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        .player-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .player-name {
            font-size: 1.2rem;
            font-weight: bold;
        }
        .player-chips {
            color: #ffd700;
            font-weight: bold;
        }
        .player-cards {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        .player-cards .card {
            width: 60px;
            height: 90px;
            font-size: 1rem;
        }
        .player-bet {
            text-align: center;
            color: #ffd700;
            font-weight: bold;
        }
        .game-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        .controls-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            gap: 15px;
            align-items: center;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }
        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }
        .btn-warning {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .bet-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .bet-input {
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            width: 100px;
            text-align: center;
        }
        .game-message {
            text-align: center;
            font-size: 1.2rem;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .winner {
            color: #ffd700;
            font-weight: bold;
        }
        .room-info {
            text-align: center;
            margin-bottom: 20px;
        }
        .room-info h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .room-info p {
            font-size: 1rem;
        }
        .room-info strong {
            font-weight: bold;
        }
        
        /* ì¹´ì§€ë…¸ ì¹© ìŠ¤íƒ€ì¼ */
        .casino-chips-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            min-height: 120px;
        }
        
        .chips-stack {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            max-width: 400px;
        }
        
        .casino-chip {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            animation: chipGlow 2s ease-in-out infinite alternate;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .casino-chip:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255,215,0,0.6);
        }
        
        .casino-chip.clicked {
            animation: chipCollect 0.5s ease-out forwards;
        }
        
        .casino-chip.collected {
            animation: none;
            pointer-events: none;
        }
        
        .casino-chip.collected:hover {
            transform: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        /* ìˆ˜ì§‘í•œ ì¹© í‘œì‹œ ìŠ¤íƒ€ì¼ */
        .player-cards-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .collected-chips-icons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            align-items: center;
        }
        
        .collected-chip-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            border: 2px solid rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: default;
            position: relative;
            animation: chipGlow 2s ease-in-out infinite alternate;
        }
        
        .chip-icon-inner {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        
        .chip-number {
            color: #fff;
            font-size: 10px;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        .collected-chip-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(255,215,0,0.4);
        }
        
        .casino-chip::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
        }
        
        .casino-chip::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
        }
        
        .chip-stars {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
        }
        
        .chip-star {
            color: #fff;
            font-size: 8px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            animation: starTwinkle 1.5s ease-in-out infinite;
        }
        
        .chip-star:nth-child(odd) {
            animation-delay: 0.5s;
        }
        
        @keyframes chipGlow {
            0% {
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            }
            100% {
                box-shadow: 0 4px 20px rgba(255,215,0,0.4);
            }
        }
        
        @keyframes starTwinkle {
            0%, 100% {
                opacity: 0.7;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        
        @keyframes chipCollect {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.3) translateY(-20px);
                opacity: 0.8;
            }
            100% {
                transform: scale(0) translateY(-50px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 id="gameTitle">í…ì‚¬ìŠ¤ í™€ë¤</h1>
        </div>
        <div class="game-info">
            <div class="pot-info">
                <div>íŒŸ</div>
                <div class="pot-amount" id="potAmount">0</div>
            </div>
            <div class="current-player" id="currentPlayer">í˜„ì¬ í”Œë ˆì´ì–´: -</div>
            <div class="game-phase" id="gamePhase">ê²Œì„ ë‹¨ê³„: -</div>
            <div class="round-info">ë¼ìš´ë“œ: <span id="currentRound">-</span>/<span id="maxRounds">5</span></div>
        </div>
        <div class="community-cards" id="communityCards"></div>
        
        <!-- ì¹´ì§€ë…¸ ì¹© ì˜ì—­ -->
        <div class="casino-chips-container" id="casinoChipsContainer">
            <div class="chips-stack">
                <!-- ì¹©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <div class="game-message" id="gameMessage">ê²Œì„ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
        <div class="players-container" id="playersList"></div>
        <div class="room-info">
            <h2>ë°© ì •ë³´</h2>
            <p><strong>ë°© ì´ë¦„:</strong> <span id="roomName"></span></p>
            <p><strong>ë°©ì¥:</strong> <span id="roomHost"></span></p>
            <p><strong>í”Œë ˆì´ì–´:</strong> <span id="playerCount">0</span>/8</p>
            <p><strong>ìµœì†Œ í”Œë ˆì´ì–´:</strong> 2ëª… (ê°œë°œìš©)</p>
        </div>
    </div>
            <div class="game-controls">
        <div class="controls-container">
            <button class="btn btn-primary" id="dealCardsBtn" onclick="dealCards()">ì¹´ë“œ ë°›ê¸°</button>
            <button class="btn btn-info" id="passBtn" onclick="pass()" disabled>íŒ¨ìŠ¤</button>
        </div>
    </div>
    <!-- íƒˆì£¼ í™•ì¸ ëª¨ë‹¬ -->
    <div id="leaveModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
        <div style="background:white; color:#222; padding:2rem; border-radius:16px; min-width:300px; text-align:center;">
            <p style="margin-bottom:2rem; font-size:1.2rem;">ì •ë§ íƒˆì£¼í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <button id="confirmLeaveBtn" class="btn btn-danger" style="margin-right:1rem;">ë„¤, íƒˆì£¼</button>
            <button id="cancelLeaveBtn" class="btn btn-success">ì·¨ì†Œ</button>
        </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
    let socket;
    let currentPlayer = null;
    let gameState = {
        players: [],
        currentPlayer: null,
        phase: 'playing',
        roomId: null,
        pot: 0,
        isMyTurn: false,
        communityCards: [],
        collectedChips: []
    };
    let isMyTurn = false;
    let isAdmin = false;
    
    // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
    async function checkAdminStatus() {
        try {
            const response = await fetch('/api/admin/status', {
                credentials: 'include'
            });
            const data = await response.json();
            console.log('ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ê²°ê³¼:', data);
            return data.isAdmin === true;
        } catch (error) {
            console.error('ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ì‹¤íŒ¨:', error);
            return false;
        }
    }
    
    function connectSocket() {
        socket = io();
        
        // ì†Œì¼“ ì—°ê²° ì‹¤íŒ¨ ì‹œ ì¬ì—°ê²°
        socket.on('connect_error', (error) => {
            console.error('ì†Œì¼“ ì—°ê²° ì‹¤íŒ¨:', error);
            console.error('ì†Œì¼“ ì—°ê²° ì‹¤íŒ¨ ìƒì„¸:', {
                message: error.message,
                type: error.type,
                description: error.description
            });
            setTimeout(() => {
                console.log('ì†Œì¼“ ì¬ì—°ê²° ì‹œë„...');
                socket.connect();
            }, 2000);
        });
        
        // ì†Œì¼“ ì—°ê²° ì‹œ ì‚¬ìš©ì ë“±ë¡
        socket.on('connect', async () => {
            console.log('ì†Œì¼“ ì—°ê²°ë¨, socket.id:', socket.id);
            console.log('ì†Œì¼“ ì—°ê²° ì‹œê°„:', new Date().toISOString());
            
            // ì¦‰ì‹œ í…ŒìŠ¤íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡
            console.log('testEvent ì „ì†¡ ì‹œì‘...');
            socket.emit('testEvent', 'test');
            console.log('testEvent ì „ì†¡ ì™„ë£Œ');
            
            // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹œë„
            console.log('ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹œë„...');
            try {
                const response = await fetch('/api/user');
                console.log('fetch ì‘ë‹µ ìƒíƒœ:', response.status);
                
                if (response.ok) {
                    const userData = await response.json();
                    console.log('ë°›ì€ ì‚¬ìš©ì ë°ì´í„°:', userData);
                    
                    if (userData && userData.username) {
                        console.log('ì‚¬ìš©ì ë“±ë¡ ì‹œë„:', userData.username);
                        console.log('ì†Œì¼“ ì—°ê²° ìƒíƒœ í™•ì¸:', socket.connected);
                        
                        if (socket.connected) {
                            console.log('registerUser ì´ë²¤íŠ¸ ì „ì†¡ ì‹œì‘...');
                            socket.emit('registerUser', userData.username);
                            console.log('registerUser ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
                        } else {
                            console.error('ì†Œì¼“ì´ ì—°ê²°ë˜ì§€ ì•ŠìŒ');
                        }
                    } else {
                        console.error('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŒ:', userData);
                        // ì‚¬ìš©ì ì •ë³´ê°€ ì—†ì–´ë„ ê³„ì† ì§„í–‰
                        console.log('ì‚¬ìš©ì ì •ë³´ ì—†ì´ ê³„ì† ì§„í–‰...');
                    }
                } else {
                    console.error('ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨ - HTTP ìƒíƒœ:', response.status);
                    // HTTP ì˜¤ë¥˜ê°€ ìˆì–´ë„ ê³„ì† ì§„í–‰
                    console.log('HTTP ì˜¤ë¥˜ê°€ ìˆì–´ë„ ê³„ì† ì§„í–‰...');
                }
            } catch (error) {
                console.error('ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
                // ì˜¤ë¥˜ê°€ ìˆì–´ë„ ê³„ì† ì§„í–‰
                console.log('ì˜¤ë¥˜ê°€ ìˆì–´ë„ ê³„ì† ì§„í–‰...');
            }
        });
        
        socket.on('gameState', (state) => {
            updateGameState(state);
        });
        
        // ì¹© ìˆ˜ì§‘ ì´ë²¤íŠ¸ ì²˜ë¦¬
        socket.on('chipCollected', (data) => {
            console.log('ì¹© ìˆ˜ì§‘ ì´ë²¤íŠ¸:', data);
            
            // gameStateì— ìˆ˜ì§‘ëœ ì¹© ì •ë³´ ì—…ë°ì´íŠ¸
            if (gameState) {
                gameState.collectedChips = data.remainingChips || [];
                console.log('ì—…ë°ì´íŠ¸ëœ gameState.collectedChips:', gameState.collectedChips);
            }
            
            // ì¹© í™”ë©´ ì—…ë°ì´íŠ¸ (ìˆ˜ì§‘ëœ ì¹©ì€ íšŒìƒ‰ìœ¼ë¡œ í‘œì‹œ)
            const collectedChips = data.remainingChips || [];
            console.log('ìˆ˜ì§‘ëœ ì¹© ëª©ë¡:', collectedChips);
            updateCasinoChips(gameState?.players?.length || 2, collectedChips);
            
            // í”Œë ˆì´ì–´ ì •ë³´ë„ ì—…ë°ì´íŠ¸ (ìˆ˜ì§‘í•œ ì¹© í‘œì‹œë¥¼ ìœ„í•´)
            if (gameState && gameState.players) {
                updatePlayers(gameState.players);
            }
            
            // íŒ¨ìŠ¤ ë²„íŠ¼ í™œì„±í™” (ì¹©ì„ ìˆ˜ì§‘í–ˆì„ ë•Œ)
            updateControls();
            
            // ìˆ˜ì§‘ ë©”ì‹œì§€ í‘œì‹œ
            showMessage(`${data.collectedBy}ë‹˜ì´ ì¹© ${data.chipIndex + 1}ì„ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!`);
        });
        
        // í”Œë ì´ë²¤íŠ¸ ì²˜ë¦¬
        socket.on('flopDealt', (data) => {
            console.log('í”Œë ì´ë²¤íŠ¸:', data);
            
            // gameState ì—…ë°ì´íŠ¸
            if (data.gameState) {
                updateGameState(data.gameState);
            }
            
            showMessage(data.message || 'í”Œëì´ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤!');
        });
        socket.on('gameMessage', (message) => {
            showMessage(message);
        });
        socket.on('gameOver', (result) => {
            showGameOver(result);
        });
        socket.on('cardsDealt', (data) => {
            console.log('ì¹´ë“œ ë¶„ë°° ì™„ë£Œ:', data);
            updateGameState(data.gameState);
            showMessage(data.message);
        });
        
        socket.on('adminRoomCreated', (data) => {
            console.log('ê´€ë¦¬ì ë°© ìƒì„± ì™„ë£Œ:', data);
            if (data.roomId) {
                console.log('ìƒì„±ëœ roomIdë¡œ ì¹´ë“œ ë°›ê¸° ì‹œë„:', data.roomId);
                // gameStateì— roomId ì„¤ì •
                if (gameState) {
                    gameState.roomId = data.roomId;
                }
                // ì¹´ë“œ ë°›ê¸° ì‹œë„
                socket.emit('requestDealCards', { roomId: data.roomId });
                showMessage('ì¹´ë“œë¥¼ ë°›ê³  ìˆìŠµë‹ˆë‹¤...');
            }
        });
        socket.on('disconnect', (reason) => {
            console.log('ê²Œì„ ì†Œì¼“ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ì´ìœ :', reason);
            console.log('ì†Œì¼“ ì—°ê²° ìƒíƒœ:', socket.connected);
        });
        
        // ê´€ë¦¬ì ê²Œì„ ì‹œì‘ ì´ë²¤íŠ¸
        socket.on('gameStarted', (data) => {
            console.log('ê´€ë¦¬ì ê²Œì„ ì‹œì‘:', data);
            console.log('ë°›ì€ gameState:', data.gameState);
            console.log('ë°›ì€ room:', data.room);
            
            // gameStateì— roomIdê°€ ìˆëŠ”ì§€ í™•ì¸
            if (data.gameState && data.gameState.roomId) {
                console.log('gameStateì— roomId ìˆìŒ:', data.gameState.roomId);
            } else {
                console.log('gameStateì— roomId ì—†ìŒ');
            }
            
            // collectedChips ì´ˆê¸°í™”
            if (data.gameState) {
                data.gameState.collectedChips = [];
            }
            
            updateGameState(data.gameState);
            
            // ë°© ì •ë³´ ì—…ë°ì´íŠ¸
            if (data.room) {
                updateRoomInfo(data.room);
            }
            
            // í”Œë ˆì´ì–´ ìˆ˜ ê°•ì œ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ì 1ì¸ ê²Œì„ì´ë¯€ë¡œ 1ëª…)
            const playerCountEl = document.getElementById('playerCount');
            if (playerCountEl) {
                playerCountEl.textContent = '1';
                console.log('í”Œë ˆì´ì–´ ìˆ˜ë¥¼ 1ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.');
            }
            
            // ê²Œì„ ìƒíƒœë¥¼ playingìœ¼ë¡œ ì„¤ì •
            if (data.gameState) {
                data.gameState.phase = 'playing';
            }
            
            showMessage('ê´€ë¦¬ì 1ì¸ ê²Œì„ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // ê²Œì„ ì‹œì‘ í›„ ì¦‰ì‹œ ì¹´ë“œ ë°›ê¸° ë²„íŠ¼ í™œì„±í™”
            setTimeout(() => {
                updateControls();
            }, 100);
        });
        
        // ì‚¬ìš©ì ë“±ë¡ ì„±ê³µ ì´ë²¤íŠ¸
        socket.on('registerUserSuccess', () => {
            console.log('ì‚¬ìš©ì ë“±ë¡ ì„±ê³µ');
            
            // ì ì‹œ ëŒ€ê¸° í›„ ê²Œì„ ì‹œì‘ (ì•ˆì •ì„±ì„ ìœ„í•´)
            setTimeout(() => {
                if (isAdmin) {
                    console.log('ê´€ë¦¬ìë¡œ ì¸ì‹ë¨, 1ì¸ ê²Œì„ ì‹œì‘');
                    
                    // ê´€ë¦¬ììš© ì œëª©ìœ¼ë¡œ ë³€ê²½
                    const gameTitle = document.getElementById('gameTitle');
                    if (gameTitle) {
                        gameTitle.textContent = 'ê´€ë¦¬ì ê²Œì„ - í…ì‚¬ìŠ¤ í™€ë¤';
                    }
                    
                    // ê´€ë¦¬ì ê²Œì„ ì‹œì‘
                    socket.emit('startAdminGame', {});
                } else {
                    console.log('ì¼ë°˜ ì‚¬ìš©ìë¡œ ì¸ì‹ë¨, 1ì¸ ê²Œì„ ì‹œì‘');
                    
                    // ì¼ë°˜ ì‚¬ìš©ìë„ 1ì¸ ê²Œì„ ì‹œì‘ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •
                    socket.emit('startAdminGame', {});
                }
            }, 1000); // 1ì´ˆ ëŒ€ê¸°
        });
    }
    function updateGameState(state) {
        console.log('updateGameState í˜¸ì¶œë¨:', state);
        console.log('í˜„ì¬ gameState (ì—…ë°ì´íŠ¸ ì „):', gameState);
        
        // collectedChips ì •ë³´ ë³´ì¡´
        const existingCollectedChips = gameState?.collectedChips || [];
        
        gameState = state;
        
        // collectedChips ì •ë³´ ë³µì› (ì„œë²„ì—ì„œ ì „ì†¡ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)
        if (!gameState.collectedChips) {
            gameState.collectedChips = existingCollectedChips;
        }
        
        console.log('ì—…ë°ì´íŠ¸ëœ gameState:', gameState);
        console.log('gameState.roomId:', gameState?.roomId);
        console.log('ìˆ˜ì§‘ëœ ì¹© ì •ë³´:', gameState.collectedChips);
        
        // gameStateì— roomIdê°€ ì—†ìœ¼ë©´ URLì—ì„œ ê°€ì ¸ì™€ì„œ ì„¤ì •
        if (!gameState.roomId) {
            const urlParams = new URLSearchParams(window.location.search);
            const roomId = urlParams.get('roomId');
            if (roomId) {
                gameState.roomId = roomId;
                console.log('updateGameStateì—ì„œ URLì—ì„œ roomId ì„¤ì •:', roomId);
            } else {
                console.log('URLì—ì„œë„ roomIdë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
        } else {
            console.log('gameStateì— ì´ë¯¸ roomId ìˆìŒ:', gameState.roomId);
        }
        
        currentPlayer = state.currentPlayer;
        isMyTurn = state.isMyTurn;
        updatePot(state.pot);
        updateCommunityCards(state.communityCards);
        updatePlayers(state.players);
        updateControls();
        updateGamePhase(state.phase);
        updateCurrentPlayerInfo(state.currentPlayer, state.isMyTurn);
        updateRoundInfo(state.currentRound, state.maxRounds);
        
        // ë°© ì •ë³´ ì—…ë°ì´íŠ¸ (room ì •ë³´ê°€ ìˆëŠ” ê²½ìš°)
        if (state.room) {
            updateRoomInfo(state.room);
        }
        
        // ì¹´ë“œ ë°›ê¸° ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        const dealCardsBtn = document.getElementById('dealCardsBtn');
        if (dealCardsBtn) {
            const hasCards = state?.players?.some(p => p.cards && p.cards.length > 0);
            dealCardsBtn.style.display = (state?.phase === 'playing' && !hasCards) ? 'inline-block' : 'none';
        }
    }
    function updatePot(pot) {
        document.getElementById('potAmount').textContent = pot;
    }
    function updateCommunityCards(cards) {
        const container = document.getElementById('communityCards');
        container.innerHTML = '';
        cards.forEach(card => {
            const cardElement = createCardElement(card);
            container.appendChild(cardElement);
        });
    }
    function updatePlayers(players) {
        console.log('updatePlayers í˜¸ì¶œë¨:', players);
        
        const container = document.getElementById('playersList');
        container.innerHTML = '';
        players.forEach(player => {
            const playerElement = createPlayerElement(player);
            container.appendChild(playerElement);
        });
        
        // í”Œë ˆì´ì–´ ìˆ˜ ì—…ë°ì´íŠ¸
        const playerCountEl = document.getElementById('playerCount');
        if (playerCountEl) {
            playerCountEl.textContent = players.length;
        }
        
        // í”Œë ˆì´ì–´ ìˆ˜ì— ë”°ë¼ ì¹© ì—…ë°ì´íŠ¸ (ìˆ˜ì§‘ëœ ì¹© ì •ë³´ í¬í•¨)
        const collectedChips = gameState?.collectedChips || [];
        console.log('í”Œë ˆì´ì–´ ìˆ˜:', players.length, 'ìˆ˜ì§‘ëœ ì¹©:', collectedChips);
        updateCasinoChips(players.length, collectedChips);
    }
    function createCardElement(card) {
        const cardDiv = document.createElement('div');
        cardDiv.className = `card ${card.suit === 'â™¥' || card.suit === 'â™¦' ? 'red' : 'black'}`;
        if (card.hidden) {
            cardDiv.classList.add('hidden');
            cardDiv.innerHTML = 'ğŸ‚ ';
        } else {
            cardDiv.innerHTML = `
                <div>${card.rank}</div>
                <div>${card.suit}</div>
            `;
        }
        return cardDiv;
    }
    function createPlayerElement(player) {
        const playerDiv = document.createElement('div');
        playerDiv.className = `player ${player.isCurrent ? 'current' : ''}`;
        
        // ìˆ˜ì§‘í•œ ì¹©ì„ ì¹´ë“œ ì˜†ì— ì‘ì€ ì•„ì´ì½˜ìœ¼ë¡œ í‘œì‹œ
        let collectedChipsIcons = '';
        if (gameState && gameState.collectedChips && gameState.collectedChips.length > 0) {
            collectedChipsIcons = `
                <div class="collected-chips-icons">
                    ${gameState.collectedChips.map(chipIndex => `
                        <div class="collected-chip-icon" data-chip-index="${chipIndex}" title="ì¹© ${chipIndex + 1}">
                            <div class="chip-icon-inner">
                                <span class="chip-number">${chipIndex + 1}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        playerDiv.innerHTML = `
            <div class="player-info">
                <div class="player-name">${player.username}</div>
            </div>
            <div class="player-cards-container">
                <div class="player-cards">
                    ${player.cards.map(card => {
                        const cardElement = createCardElement(card);
                        return cardElement.outerHTML;
                    }).join('')}
                </div>
                ${collectedChipsIcons}
            </div>
        `;
        return playerDiv;
    }
    function updateControls() {
        const dealCardsBtn = document.getElementById('dealCardsBtn');
        const passBtn = document.getElementById('passBtn');
        
        // ì¹´ë“œ ë°›ê¸° ë²„íŠ¼ì€ í•­ìƒ í‘œì‹œ
        if (dealCardsBtn) {
            dealCardsBtn.style.display = 'inline-block';
            console.log('ì¹´ë“œ ë°›ê¸° ë²„íŠ¼ì„ í‘œì‹œí–ˆìŠµë‹ˆë‹¤.');
        }
        
        // íŒ¨ìŠ¤ ë²„íŠ¼ì€ ì¹©ì„ ìˆ˜ì§‘í–ˆì„ ë•Œë§Œ í™œì„±í™”
        if (passBtn) {
            const hasCollectedChips = gameState?.collectedChips && gameState.collectedChips.length > 0;
            console.log('íŒ¨ìŠ¤ ë²„íŠ¼ í™œì„±í™” ì—¬ë¶€:', hasCollectedChips, 'ìˆ˜ì§‘ëœ ì¹©:', gameState?.collectedChips);
            passBtn.disabled = !hasCollectedChips;
        }
    }
    
    function updateRoundInfo(currentRound, maxRounds) {
        const currentRoundEl = document.getElementById('currentRound');
        const maxRoundsEl = document.getElementById('maxRounds');
        
        if (currentRoundEl) {
            currentRoundEl.textContent = currentRound || '-';
        }
        
        if (maxRoundsEl) {
            maxRoundsEl.textContent = maxRounds || 5;
        }
    }
    
    function updateRoomInfo(room) {
        const roomNameEl = document.getElementById('roomName');
        const roomHostEl = document.getElementById('roomHost');
        
        if (roomNameEl && room) {
            roomNameEl.textContent = room.name || 'ì•Œ ìˆ˜ ì—†ìŒ';
        }
        
        if (roomHostEl && room) {
            roomHostEl.textContent = room.host || 'ì•Œ ìˆ˜ ì—†ìŒ';
        }
    }
    function updateGamePhase(phase) {
        const phaseNames = {
            'preflop': 'í”„ë¦¬í”Œë',
            'flop': 'í”Œë',
            'turn': 'í„´',
            'river': 'ë¦¬ë²„',
            'showdown': 'ì‡¼ë‹¤ìš´',
            'playing': 'ê²Œì„ ì§„í–‰ ì¤‘'
        };
        document.getElementById('gamePhase').textContent = `ê²Œì„ ë‹¨ê³„: ${phaseNames[phase] || phase}`;
    }
    function updateCurrentPlayerInfo(playerName, isMyTurn) {
        const currentPlayerEl = document.getElementById('currentPlayer');
        if (isMyTurn) {
            currentPlayerEl.textContent = `í˜„ì¬ í”Œë ˆì´ì–´: ${playerName} (ë‹¹ì‹ ì˜ ì°¨ë¡€!)`;
            currentPlayerEl.style.color = '#ffd700';
        } else {
            currentPlayerEl.textContent = `í˜„ì¬ í”Œë ˆì´ì–´: ${playerName}`;
            currentPlayerEl.style.color = 'white';
        }
    }
    function showMessage(message) {
        document.getElementById('gameMessage').textContent = message;
    }
    function showGameOver(result) {
        const message = `ê²Œì„ ì¢…ë£Œ! ${result.winner}ë‹˜ì´ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!`;
        document.getElementById('gameMessage').innerHTML = `<span class=\"winner\">${message}</span>`;
        setTimeout(() => { window.location.href = '/lobby.html'; }, 3000);
    }

    
    function dealCards() {
        console.log('ì¹´ë“œ ë°›ê¸° ë²„íŠ¼ í´ë¦­ë¨');
        console.log('í˜„ì¬ gameState:', gameState);
        
        // socket ì—°ê²° ìƒíƒœ í™•ì¸
        if (!socket) {
            console.error('Socketì´ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            showMessage('ì—°ê²°ì„ í™•ì¸ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            return;
        }
        
        let roomId = null;
        
        // 1. gameStateì—ì„œ roomId ê°€ì ¸ì˜¤ê¸° (ìš°ì„ ìˆœìœ„ 1)
        if (gameState?.roomId) {
            roomId = gameState.roomId;
            console.log('gameStateì—ì„œ ê°€ì ¸ì˜¨ roomId:', roomId);
        }
        
        // 2. URLì—ì„œ roomId ê°€ì ¸ì˜¤ê¸° (ìš°ì„ ìˆœìœ„ 2)
        if (!roomId) {
            const urlParams = new URLSearchParams(window.location.search);
            roomId = urlParams.get('roomId');
            console.log('URLì—ì„œ ê°€ì ¸ì˜¨ roomId:', roomId);
        }
        
        // 3. socket.dataì—ì„œ roomId ê°€ì ¸ì˜¤ê¸° (ìš°ì„ ìˆœìœ„ 3)
        if (!roomId && socket?.data?.roomId) {
            roomId = socket.data.roomId;
            console.log('socket.dataì—ì„œ ê°€ì ¸ì˜¨ roomId:', roomId);
        }
        
        // roomIdê°€ ì—†ìœ¼ë©´ ê´€ë¦¬ì ë°© ìƒì„± ìš”ì²­
        if (!roomId) {
            console.log('roomIdë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ê´€ë¦¬ì ë°© ìƒì„± ìš”ì²­...');
            socket.emit('createAdminRoom', {});
            showMessage('ê´€ë¦¬ì ë°©ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...');
            return;
        }
        
        console.log('ìµœì¢… ì‚¬ìš©í•  roomId:', roomId);
        
        // ì¹´ë“œ ë°›ê¸° ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        showCardDealingAnimation();
        
        socket.emit('requestDealCards', { roomId: roomId });
        showMessage('ì¹´ë“œë¥¼ ë°›ê³  ìˆìŠµë‹ˆë‹¤...');
    }
    
    function pass() {
        console.log('íŒ¨ìŠ¤ ë²„íŠ¼ í´ë¦­ë¨');
        
        // ì¹©ì„ ìˆ˜ì§‘í–ˆëŠ”ì§€ í™•ì¸
        if (!gameState?.collectedChips || gameState.collectedChips.length === 0) {
            showMessage('íŒ¨ìŠ¤í•˜ë ¤ë©´ ë¨¼ì € ì¹©ì„ ìˆ˜ì§‘í•´ì•¼ í•©ë‹ˆë‹¤.');
            return;
        }
        
        showMessage('íŒ¨ìŠ¤í–ˆìŠµë‹ˆë‹¤!');
        
        // íŒ¨ìŠ¤ ë²„íŠ¼ ë¹„í™œì„±í™”
        const passBtn = document.getElementById('passBtn');
        if (passBtn) {
            passBtn.disabled = true;
        }
    }
    

    
    // ì¹©ê³¼ ë³„ ìƒì„± í•¨ìˆ˜
    function updateCasinoChips(playerCount, collectedChips = []) {
        console.log('updateCasinoChips í˜¸ì¶œë¨:', { playerCount, collectedChips });
        
        const chipsContainer = document.getElementById('casinoChipsContainer');
        const chipsStack = chipsContainer.querySelector('.chips-stack');
        
        if (!chipsContainer || !chipsStack) {
            console.error('ì¹© ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            return;
        }
        
        // ê¸°ì¡´ ì¹©ë“¤ ì œê±°
        chipsStack.innerHTML = '';
        
        console.log(`í”Œë ˆì´ì–´ ìˆ˜: ${playerCount}, ìˆ˜ì§‘ëœ ì¹©: ${collectedChips.length}ê°œ`);
        
        // í”Œë ˆì´ì–´ ìˆ˜ë§Œí¼ ì¹© ìƒì„±
        for (let i = 0; i < playerCount; i++) {
            const chip = document.createElement('div');
            chip.className = 'casino-chip';
            chip.dataset.chipIndex = i;
            
            // ì´ë¯¸ ìˆ˜ì§‘ëœ ì¹©ì¸ì§€ í™•ì¸
            const isCollected = collectedChips.includes(i);
            console.log(`ì¹© ${i + 1}: ${isCollected ? 'ìˆ˜ì§‘ë¨' : 'ìˆ˜ì§‘ë˜ì§€ ì•ŠìŒ'}`);
            
            if (isCollected) {
                // ìˆ˜ì§‘ëœ ì¹©ì€ íšŒìƒ‰ìœ¼ë¡œ í‘œì‹œí•˜ê³  í´ë¦­ ë¶ˆê°€ëŠ¥í•˜ê²Œ
                chip.classList.add('collected');
                chip.style.background = 'linear-gradient(135deg, #95a5a6, #7f8c8d)';
                chip.style.cursor = 'default';
                chip.style.opacity = '0.6';
            } else {
                // ì¹© ìƒ‰ìƒ (í”Œë ˆì´ì–´ë³„ë¡œ ë‹¤ë¥¸ ìƒ‰ìƒ)
                const colors = [
                    'linear-gradient(135deg, #e74c3c, #c0392b)', // ë¹¨ê°•
                    'linear-gradient(135deg, #3498db, #2980b9)', // íŒŒë‘
                    'linear-gradient(135deg, #27ae60, #229954)', // ì´ˆë¡
                    'linear-gradient(135deg, #f39c12, #e67e22)', // ì£¼í™©
                    'linear-gradient(135deg, #9b59b6, #8e44ad)', // ë³´ë¼
                    'linear-gradient(135deg, #1abc9c, #16a085)', // ì²­ë¡
                    'linear-gradient(135deg, #e67e22, #d35400)', // ì£¼í™©
                    'linear-gradient(135deg, #34495e, #2c3e50)'  // íšŒìƒ‰
                ];
                
                chip.style.background = colors[i % colors.length];
                
                // ì¹© í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€ (ìˆ˜ì§‘ë˜ì§€ ì•Šì€ ì¹©ë§Œ)
                chip.addEventListener('click', function() {
                    collectChip(this, i);
                });
            }
            
            // ë³„ ìƒì„± (í”Œë ˆì´ì–´ ìˆ˜ì— ë”°ë¼ ì¦ê°€)
            const starsContainer = document.createElement('div');
            starsContainer.className = 'chip-stars';
            
            // í”Œë ˆì´ì–´ ìˆ˜ì— ë”°ë¼ ë³„ ê°œìˆ˜ ê²°ì • (ìµœì†Œ 1ê°œ, ìµœëŒ€ 8ê°œ)
            const starCount = Math.min(playerCount, 8);
            
            for (let j = 0; j < starCount; j++) {
                const star = document.createElement('div');
                star.className = 'chip-star';
                star.textContent = 'â˜…';
                star.style.animationDelay = `${j * 0.2}s`;
                starsContainer.appendChild(star);
            }
            
            chip.appendChild(starsContainer);
            chipsStack.appendChild(chip);
        }
        
        console.log(`ì´ ${playerCount}ê°œì˜ ì¹© ìƒì„± ì™„ë£Œ`);
    }
    
    // ì¹© ìˆ˜ì§‘ í•¨ìˆ˜
    function collectChip(chipElement, chipIndex) {
        console.log('collectChip í˜¸ì¶œë¨:', chipIndex);
        
        // ì´ë¯¸ ìˆ˜ì§‘ëœ ì¹©ì¸ì§€ í™•ì¸
        if (chipElement.classList.contains('clicked') || chipElement.classList.contains('collected')) {
            console.log('ì´ë¯¸ ìˆ˜ì§‘ëœ ì¹©ì…ë‹ˆë‹¤');
            return;
        }
        
        // ì¹© ìˆ˜ì§‘ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        chipElement.classList.add('clicked');
        
        // ì„œë²„ì— ì¹© ìˆ˜ì§‘ ì´ë²¤íŠ¸ ì „ì†¡
        socket.emit('collectChip', {
            roomId: gameState.roomId,
            chipIndex: chipIndex
        });
        
        // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ì¹©ì„ ìˆ˜ì§‘ëœ ìƒíƒœë¡œ ë³€ê²½
        setTimeout(() => {
            chipElement.classList.remove('clicked');
            chipElement.classList.add('collected');
            chipElement.style.background = 'linear-gradient(135deg, #95a5a6, #7f8c8d)';
            chipElement.style.cursor = 'default';
            chipElement.style.opacity = '0.6';
            chipElement.style.pointerEvents = 'none';
        }, 500);
        
        // ìˆ˜ì§‘ íš¨ê³¼ìŒ (ì„ íƒì‚¬í•­)
        showMessage(`ì¹© ${chipIndex + 1}ì„ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!`);
    }
    
    // ì¹´ë“œ ë°›ê¸° ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜ (ìœ„ì—ì„œ ë‚´ë ¤ì˜¤ëŠ” íš¨ê³¼)
    function showCardDealingAnimation() {
        // ê¸°ì¡´ ì• ë‹ˆë©”ì´ì…˜ ìš”ì†Œ ì œê±°
        const existingAnimation = document.querySelector('.card-dealing-animation');
        if (existingAnimation) {
            existingAnimation.remove();
        }
        
        // ì• ë‹ˆë©”ì´ì…˜ ì»¨í…Œì´ë„ˆ ìƒì„±
        const animationContainer = document.createElement('div');
        animationContainer.className = 'card-dealing-animation';
        animationContainer.style.cssText = `
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            gap: 10px;
        `;
        
        // ì¹´ë“œ ë‘ ì¥ ìƒì„±
        for (let i = 0; i < 2; i++) {
            const card = document.createElement('div');
            card.className = 'dealing-card';
            card.style.cssText = `
                width: 60px;
                height: 90px;
                background: linear-gradient(45deg, #2c3e50, #34495e);
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                transform: translateY(-100px);
                opacity: 0;
                transition: all 0.6s ease-out;
                border: 2px solid #fff;
            `;
            
            // ì¹´ë“œ ë’·ë©´ íŒ¨í„´ ì¶”ê°€
            card.innerHTML = `
                <div style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    font-size: 24px;
                    color: #fff;
                    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
                ">â™ </div>
            `;
            
            animationContainer.appendChild(card);
        }
        
        document.body.appendChild(animationContainer);
        
        // ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
        setTimeout(() => {
            const cards = animationContainer.querySelectorAll('.dealing-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.transform = 'translateY(0)';
                    card.style.opacity = '1';
                }, index * 200);
            });
        }, 100);
        
        // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ì œê±°
        setTimeout(() => {
            if (animationContainer.parentNode) {
                animationContainer.remove();
            }
        }, 3000);
    }
    
    // íƒˆì£¼ ë²„íŠ¼ ë° ëª¨ë‹¬ ë™ì‘ (ë²„íŠ¼ì´ ì¡´ì¬í•  ë•Œë§Œ ì„¤ì •)
    const leaveBtn = document.getElementById('leaveBtn');
    const cancelLeaveBtn = document.getElementById('cancelLeaveBtn');
    const confirmLeaveBtn = document.getElementById('confirmLeaveBtn');
    
    if (leaveBtn) {
        leaveBtn.onclick = function() {
            const leaveModal = document.getElementById('leaveModal');
            if (leaveModal) {
                leaveModal.style.display = 'flex';
            }
        };
    }
    
    if (cancelLeaveBtn) {
        cancelLeaveBtn.onclick = function() {
            const leaveModal = document.getElementById('leaveModal');
            if (leaveModal) {
                leaveModal.style.display = 'none';
            }
        };
    }
    
    if (confirmLeaveBtn) {
        confirmLeaveBtn.onclick = function() {
            const leaveModal = document.getElementById('leaveModal');
            if (leaveModal) {
                leaveModal.style.display = 'none';
            }
            if (socket) {
                socket.emit('leaveRoom');
            }
            setTimeout(() => { window.location.href = '/lobby.html'; }, 200);
        };
    }
    window.addEventListener('load', async () => {
        // ì´ˆê¸° í”Œë ˆì´ì–´ ìˆ˜ ì„¤ì •
        const playerCountEl = document.getElementById('playerCount');
        if (playerCountEl) {
            playerCountEl.textContent = '1';
            console.log('ì´ˆê¸° í”Œë ˆì´ì–´ ìˆ˜ë¥¼ 1ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.');
        }
        
        // ì´ˆê¸° ê²Œì„ ìƒíƒœ ì„¤ì •
        gameState.phase = 'playing';
        updateControls();
        console.log('ì´ˆê¸° ê²Œì„ ìƒíƒœ ì„¤ì • ì™„ë£Œ');
        
        // URLì—ì„œ roomId ê°€ì ¸ì™€ì„œ gameStateì— ì„¤ì •
        const urlParams = new URLSearchParams(window.location.search);
        const roomId = urlParams.get('roomId');
        if (roomId) {
            gameState.roomId = roomId;
            console.log('í˜ì´ì§€ ë¡œë“œ ì‹œ roomId ì„¤ì •:', roomId);
        }
        
        connectSocket();
        
        // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
        isAdmin = await checkAdminStatus();
        console.log('ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ê²°ê³¼:', isAdmin);
        
        // ê²Œì„ ì‹œì‘ì€ registerUserSuccess ì´ë²¤íŠ¸ì—ì„œ ì²˜ë¦¬ë¨
        console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ, ì‚¬ìš©ì ë“±ë¡ ëŒ€ê¸° ì¤‘...');
        
        // ê´€ë¦¬ì ê²Œì„ ìë™ ì‹œì‘ (socket ì—°ê²° í™•ì¸ í›„)
        setTimeout(() => {
            console.log('ê´€ë¦¬ì ê²Œì„ ìë™ ì‹œì‘ ì‹œë„...');
            if (socket && socket.connected) {
                socket.emit('startAdminGame', {});
            } else {
                console.error('Socketì´ ì—°ê²°ë˜ì§€ ì•Šì•„ ê²Œì„ ì‹œì‘ì„ ì§€ì—°ì‹œí‚µë‹ˆë‹¤.');
                setTimeout(() => {
                    if (socket && socket.connected) {
                        socket.emit('startAdminGame', {});
                    }
                }, 2000);
            }
        }, 1000);
        
        // ì´ˆê¸° ì¹© í‘œì‹œ (ê¸°ë³¸ê°’ 2ê°œ, ìˆ˜ì§‘ëœ ì¹© ì—†ìŒ)
        console.log('í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ì¹© í‘œì‹œ');
        updateCasinoChips(2, []);
    });
    </script>
</body>
</html> 